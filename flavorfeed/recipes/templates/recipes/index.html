{% extends 'base.html' %}
{% load filter_tags %}

{% block content %}
<div class="main">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="filter_filters"><h3>–§–∏–ª—å—Ç—Ä—ã</h3></div>
                {% with request.GET.page as current_page %}
                <a href="{% if current_page %}?page={{ current_page }}{% else %}?{% endif %}" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</a>
                {% endwith %}
            </div>

            <hr>
            <div class="filter-section">
                <h4>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h4>
                <a href="{% filter_url 'category' 'all' %}" class="filter-option {% is_active 'category' 'all' %}">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
                {% for category in categories %}
                <a href="{% filter_url 'category' category.slug %}" class="filter-option {% is_active 'category' category.slug %}">{{ category.name }}</a>
                {% endfor %}
            </div>
            <hr>
            <div class="filter-section">
                <h4>–°–ª–æ–∂–Ω–æ—Å—Ç—å</h4>
                <a href="{% filter_url 'difficulty' 'all' %}" class="filter-option {% is_active 'difficulty' 'all' %}">–í—Å–µ</a>
                <a href="{% filter_url 'difficulty' 'easy' %}" class="filter-option {% is_active 'difficulty' 'easy' %}">–õ–µ–≥–∫–æ</a>
                <a href="{% filter_url 'difficulty' 'medium' %}" class="filter-option {% is_active 'difficulty' 'medium' %}">–°—Ä–µ–¥–Ω–µ</a>
                <a href="{% filter_url 'difficulty' 'hard' %}" class="filter-option {% is_active 'difficulty' 'hard' %}">–°–ª–æ–∂–Ω–æ</a>
            </div>
        </div>
        <div class="content">
            <div class="content-header">
                <h1>–ö–∞—Ç–∞–ª–æ–≥ –±–ª—é–¥</h1>
                <span>–ù–∞–π–¥–µ–Ω–æ: {{ paginator.count }} –±–ª—é–¥</span>
            </div>
            <div class="dishes-grid">
                {% for dish in dishes %}
                    <div class="dish-card">
                        <a href="{% url 'recipe_info:dish_detail' dish.slug %}" class="dish-card-link">
                        <div class="dish-image-container">
                            <img src="{{ dish.photo.url }}" alt="{{ dish.name }}" class="dish-image">
                            <div class="difficulty-tag tag-{{ dish.difficulty }}">üë®üèª‚Äçüç≥ {{ dish.get_difficulty_display }}</div>
                        </div>
                        <div class="dish-info">
                            <h3>{{ dish.name }}</h3>
                            <p>{{ dish.descr }}</p>
                            <div class="dish-meta">
                                <div class="rating">
                                    <span class="stars">‚òÖ</span>
                                    <span class="rating-text">4.8</span>
                                    <span class="rating-count">(124)</span>
                                </div>
                                <div class="time">
                                    <span>‚è±Ô∏è {{ dish.cooking_time }} –º–∏–Ω</span>
                                </div>
                            </div>
                            <span class="category">{{ dish.cat }}</span>
                        </div>
                        <div class="price">{{ dish.dish_price }} ‚ÇΩ</div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
</div>
{% endblock %}
{% block navigation %}
<nav class="pagination">
    <ul>
        {% for p in paginator.page_range %}
        <li class="list-pages {% if p == page_obj.number %}active{% endif %}">
            {% if p == page_obj.number %}
            <span>{{ p }}</span>
            {% else %}
            <a href="{% filter_url 'page' p %}">{{ p }}</a>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</nav>
{% endblock %}

